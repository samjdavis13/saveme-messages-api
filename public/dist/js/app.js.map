{"version":3,"sources":["manifest.js","controllers/main.js","controllers/message.js","services/data.js"],"names":[],"mappings":"AAAA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["'use strict';\n\nangular.module('messagesApp', []);","angular.module('messagesApp')\n.controller('mainCtrl', function($scope, dataService){\n\n    dataService.getMessages(function(response) {\n        var messages = response.data.messages;\n        $scope.messages = messages;\n    })\n\n    $scope.addMessage = function() {\n        $scope.messages.push({content: \"New message\", edited: true});\n    }\n\n});","angular.module('messagesApp')\n\n.controller('messageCtrl', function($scope, dataService){\n\n    $scope.deleteMessage = function(message, index) {\n        dataService.deleteMessage(message)\n        .finally($scope.messages.splice(index, 1));\n        // Delete todo with our data service as well...\n    }\n\n    $scope.saveMessages = function() {\n        var editedMessages = $scope.messages.filter(function(message) {\n            if (message.edited) {\n                return message;\n            };\n        });\n        dataService.saveMessages(editedMessages);\n        $scope.resetMessageState()\n    }\n\n    $scope.resetMessageState = function() {\n        $scope.messages.forEach(function(message) {\n            message.edited = false;\n        });\n    }\n\n});","angular.module('messagesApp')\n\n.service('dataService', function($http, $q) {\n\n    this.getMessages = function(cb) {\n        $http.get('/api/messages').then(cb);\n    }\n\n    this.saveMessages = function(messages) {\n\n        var queue = [];\n\n        messages.forEach(function(message) {\n            var request;\n            if (message._id) {\n                request = $http.put('/api/messages/' + message._id, message)\n            } else {\n                request = $http.post('/api/messages', message);\n            }\n            queue.push(request);\n        });\n\n        return $q.all(queue).then(function(results) {\n            console.log(\"Saved \" + messages.length + \" messages\");\n        })\n\n    }\n\n    this.deleteMessage = function(message) {\n\n        var queue = [];\n\n        var request;\n        if (message._id) {\n            request = $http.delete('/api/messages/' + message._id);\n        } else {\n            console.log(\"Error, no ID provided\");\n        }\n        queue.push(request);\n\n        return $q.all(queue).then(function(results) {\n            console.log(\"The message \\\"\" + message.content + \"\\\" was deleted\");\n        })\n    }\n\n});"]}